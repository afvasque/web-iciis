<div class="map">

	<%= gmaps({
    "markers" => {"data" => @json}, 
    "map_options"=>{"auto_zoom" => false} 
  }) %>

</div>

<% content_for :scripts do %>

<script type="text/javascript" charset="utf-8">

  Gmaps.map.callback = function() {
    Gmaps.map.map.setOptions({
    	zoomControl: false,
    	streetViewControl: false,
    	panControl: false,
    });

  if (Gmaps.map.markers.length == 1) {
         //only one marker, choose the zoom level you expect
         setTimeout(function() { Gmaps.map.serviceObject.setZoom(5);}, 50);
        }
        else{
         //more than one marker, let's auto_zoom
         Gmaps.map.map_options.auto_zoom = true;
         Gmaps.map.adjustMapToBounds();
        }
  };
</script>

<% end %>